<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
    * {
      margin: 0;
      padding: 0;
      font-weight: normal;
    }

    .weather-container {
      background-color: whitesmoke;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }

    .weather-item {
      background-image: linear-gradient(120deg, #a1c4fd 0%, #c2e9fb 100%);

      width: 60%;
      height: 70%;
      border-radius: 20px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }

    #buttons {
      width: 80%;
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      align-items: center;
    }

    button {
      width: clamp(80px, 20%, 100px);
      height: 50px;
      margin: 2px;
      border-radius: 5px;
      border: 0;
      background-color: white;
      cursor: pointer;
    }

    button:hover {
      background-color: #D3D4D5;
    }

    button:active {
      background-color: #C6C7C8;
    }


    .weather-data {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }

    h1 {
      font-size: clamp(1.5em, 9vw, 3em);
      font-weight: 500;
    }

    .weather-data>h1 {
      margin-top: 10px;
      font-size: clamp(2em, 12vw, 4em);
      font-weight: bold;
    }

    .weather-data>h2 {
      font-size: clamp(1em, 6vw, 2em);
    }

    .weather-data>h3 {
      margin-bottom: 10px;
      font-size: clamp(1em, 6vw, 2em);
    }
  </style>
</head>
<body>
    <div class="weather-container">
    <div class="weather-item">
      <h1>ğŸŒ¤ï¸ë‚ ì”¨</h1>
      <div class="weather-data">
        <h2 id="city">Gwangju</h2>
        <h1 id="temp">20.0â„ƒ</h1>
        <h3 id="weather">ë§‘ìŒ</h3>
      </div>
      <div id="buttons">
        <button>Seoul</button>
        <button>Praha</button>
        <button>Monaco</button>
        <button>Baku</button>
      </div>
    </div>
  </div>


    <script>
        // ë‚ ì”¨ ì •ë³´ë¥¼ ë°›ì•„ì„œ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ê° ë„ì‹œì˜ ë‚ ì”¨ê°€ ëœ¨ëŠ” í”„ë¡œê·¸ë¨
        // 1. í™”ë©´ì˜ ì²« ë Œë”ë§ ì§í›„, 'Gwangju'ì˜ ë‚ ì”¨ê°€ í™”ë©´ì— ëœ¨ë„ë¡
        // 2. ë²„íŠ¼ì„ í´ë¦¬ê°›ë©´ ê·¸ ë²„íŠ¼ì˜ ë„ì‹œì˜ ë‚ ì”¨ê°€ í™”ë©´ì— ëœ¨ë„ë¡

        // ë§Œë“¤í•¨ìˆ˜
        // - fetchWeatherData : APIë¥¼ ì—°ê²°í•´ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê¸°(fetch)
        // - handleCity : ë²„íŠ¼ì„ ëˆŒë €ì„ ë•Œ, ë„ì‹œ ì •ë³´ë¥¼ ë³€ê²½

        // - í‘œì‹œí•  ë°ì´í„° : city, temp, weather

        // 1. fetchWeatherData í•¨ìˆ˜ í˜¸ì¶œ ì‹œ, fetchí•¨ìˆ˜ë¥¼ ì´ìš©í•´ì„œ
        //    ë‚ ì”¨ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¨ë‹¤!
        // 2. ë¶ˆëŸ¬ì˜¨ ë‚ ì”¨ ë°ì´í„°ì—ì„œ ì˜¨ë„ì™€ ë‚ ì”¨ë¥¼ ê°€ì ¸ì˜¨ë‹¤.
        //  - temp : main.temp
        //  - weather : weather[0].description
        // 3. ë„ì‹œ ì´ˆê¸°ê°’ : Gwangju
        //    ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ ë²„íŠ¼ì˜ ì´ë¦„ì„ ê¸°ë°˜ìœ¼ë¡œ ë„ì‹œ ì •ë³´ ë³€ê²½
        //    fetchWeatherData ì¬ì‹¤í–‰

        // ë‚ ì”¨ ì •ë³´ ë¶ˆëŸ¬ì˜¤ëŠ” í•¨ìˆ˜
        const fetchWeatherData = async (cityName) => {
            // console.log("fetchWeatherData ì‹¤í–‰");
            const url = "http://api.openweathermap.org/data/2.5/weather";
            const key = "2cffebcc01c6ad58435fad79d58b1836";
            const units = "metric";
            const lang = "kr";

            try {
                // ì‹¤ìŠµ : ë‚ ì”¨ ì •ë³´ë¥¼ fetch í•¨ìˆ˜ë¥¼ ì¨ì„œ ë¶ˆëŸ¬ì˜¤ê¸°
                const res = await fetch(`${url}?q=${cityName}&appid=${key}&units=${units}&lang=${lang}`);
                const data = await res.json();
                console.log(data);
                
                // ì‹¤ìŠµ : ë¶ˆëŸ¬ì˜¨ ì •ë³´ë¥¼ html ìš”ì†Œì˜ innerTextì— ë„£ì–´ì£¼ê¸°!
                const city = document.getElementById("city");
                const temp = document.getElementById("temp");
                const weather = document.getElementById("weather");

                city.innerText = cityName;
                temp.innerText = data.main.temp + "â„ƒ";
                weather.innerText = data.weather[0].description;

            } catch (error) {
                console.log(error);
            }
        }
        

        // ë„ì‹œë¥¼ ë³€ê²½í•˜ëŠ” í•¨ìˆ˜
        const handleCity = async(e) => {
            // console.log(("handleCity ì‹¤í–‰"));

            //ì‹¤ìŠµ : ë„ì‹œ ì •ë³´ë¥¼ ë²„íŠ¼ìœ¼ë¡œë¶€í„° ì¶”ì¶œí•´ì„œ fetchWeatherDataí•¨ìˆ˜ì— ì „ë‹¬
            await fetchWeatherData(e.target.innerText);
        }

        // ë²„íŠ¼ì— ë„ì‹œë¥¼ ë³€ê²½í•˜ëŠ” í•¨ìˆ˜ ì—°ê²°
        const buttons = document.getElementsByTagName("button");
        for(let i = 0; i < buttons.length; i++) {
            buttons[i].addEventListener("click",handleCity);
        }

        fetchWeatherData("Gwangju");


    </script>
</body>
</html>